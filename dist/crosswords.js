!function(e){var t={};function r(l){if(t[l])return t[l].exports;var n=t[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,l){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(l,n,function(t){return e[t]}.bind(null,n));return l},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){const l=r(1),n=r(2);r(3),window.CrosswordsJS={Crossword:l,CrosswordDOM:n}},function(e,t){e.exports=function(e){if(!e)throw new Error("The Crossword must be initialised with a crossword definition.");if(this.width=e.width,this.height=e.height,this.acrossClues=[],this.downClues=[],this.cells=function(e){for(var t=e.width,r=e.height,l=new Array(t),n=0;n<r;n++){l[n]=new Array(r);for(var s=0;s<r;s++)l[n][s]={crossword:e,x:n,y:s}}return l}(this),void 0===this.width||null===this.width||this.width<0||void 0===this.height||null===this.height||this.height<0)throw new Error("The crossword bounds are invalid.");for(var t=e.acrossClues.concat(e.downClues),r=0;r<t.length;r++){var l=t[r],n=r<e.acrossClues.length,s={number:l.number,code:l.number+(n?"a":"d"),answer:l.answer,x:l.x-1,y:l.y-1,across:n,length:[],totalLength:0,clue:l.clue,cells:[]};if(this[n?"acrossClues":"downClues"].push(s),s.x<0||s.x>=this.width||s.y<0||s.y>=this.height)throw new Error("Clue "+s.code+" doesn't start in the bounds.");for(var o=0;o<l.length.length;o++)s.length.push(l.length[o]),s.totalLength+=l.length[o];if(n){if(s.x+s.totalLength>this.width)throw new Error("Clue "+s.code+" exceeds horizontal bounds.")}else if(s.y+s.totalLength>this.height)throw new Error("Clue "+s.code+" exceeds vertical bounds.");for(var a=s.x,c=s.y,u=0;u<s.totalLength;u++){var i=this.cells[a][c];if(i.light=!0,i[n?"acrossClue":"downClue"]=s,i[n?"acrossClueLetterIndex":"downClueLetterIndex"]=u,s.cells.push(i),s.answer){if(void 0!==i.answer&&" "!==i.answer&&i.answer!==s.answer[u])throw new Error("Clue "+s.code+" answer at ("+(a+1)+", "+(c+1)+") is not coherent with previous clue ("+i.acrossClue.code+") answer.");i.answer=s.answer[u]}if(0===u){if(i.clueLabel&&i.clueLabel!==s.number)throw new Error("Clue "+s.code+" has a label which is inconsistent with another clue ("+i.acrossClue.code+").");i.clueLabel=s.number}n?a++:c++}}}},function(e,t){function r(e,t){var r=new RegExp("(?:^|\\s)"+t+"(?!\\S)","g");e.className=e.className.replace(r,"")}function l(){this.map=[]}l.prototype.add=function(e,t){this.map.push({cell:e,cellElement:t})},l.prototype.getCellElement=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t].cell===e)return this.map[t].cellElement;return null},l.prototype.getCell=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t].cellElement===e)return this.map[t].cell;return null},l.prototype.removeCrosswordCells=function(e){for(var t=0;t<this.map.length;t++)this.map[t].cell.crossword===e&&this.map.splice(t,1)};function n(e,t){this.crossword=e,this.parentElement=t;var r=document.createElement("div");r.className="crossword";for(var l=0;l<e.height;l++){var n=document.createElement("div");n.className="cwrow",r.appendChild(n);for(var o=0;o<e.width;o++){var a=e.cells[o][l],c=this._createCellDOM(a);n.appendChild(c),s.add(a,c)}}t.appendChild(r),this.crosswordElement=r}n.prototype.selectClue=function(e){this.currentClue=e,this._updateDOM(),s.getCellElement(e.cells[0]).focus(),this._stateChange("clueSelected")},n.prototype.destroy=function(){s.removeCrosswordCells(this.crossword),this.parentElement.removeChild(this.crosswordElement),this.onStateChanged=null},n.prototype._stateChange=function(e,t){var r=this.onStateChanged;r&&r({message:e,data:t})},n.prototype._createCellDOM=function(e){var t=this,r=document.createElement("div");if(r.className="cwcell",e.cellElement=r,r.className+=e.light?" light":" dark",!e.light)return r;var l=document.createElement("input");if(l.maxLength=1,e.answer&&(l.value=e.answer),r.appendChild(l),e.clueLabel){var n=document.createElement("div");n.className="cwcluelabel",n.innerHTML=e.clueLabel,r.appendChild(n)}return l.addEventListener("focus",(function(e){var r=e.target.parentNode,l=s.getCell(r),n=(l.crossword,l.acrossClue),o=l.downClue;(!t.currentClue||t.currentClue!==n&&t.currentClue!==o)&&(t.currentClue=n&&!o||!n&&o?n||o:0===l.downClueLetterIndex&&0!==l.acrossClueLetterIndex?o:n,t._updateDOM(),t._stateChange("clueSelected"))})),r.addEventListener("keydown",(function(e){if(8===e.keyCode){e.preventDefault(),e.target.value="";var r=e.target.parentNode,l=((i=s.getCell(r)).acrossClue===t.currentClue?i.acrossClueLetterIndex:i.downClueLetterIndex)-1;l>=0&&t.currentClue.cells[l].cellElement.querySelector("input").focus()}else if(9===e.keyCode){e.preventDefault();r=e.target.parentNode;for(var n=(i=s.getCell(r)).crossword,o=t.currentClue,a=o.across?n.acrossClues:n.downClues,c=0;c<a.length;c++)if(o===a[c]){var u=null;u=e.shiftKey?c>0?a[c-1]:o.across?n.downClues[n.downClues.length-1]:n.acrossClues[n.acrossClues.length-1]:c<a.length-1?a[c+1]:o.across?n.downClues[0]:n.acrossClues[0],t.currentClue=u,t._updateDOM(),s.getCellElement(u.cells[0]).querySelector("input").focus();break}}else if(13===e.keyCode){e.preventDefault();var i;r=e.target.parentNode,n=(i=s.getCell(r)).crossword;i.acrossClue&&i.downClue&&(t.currentClue=i.acrossClue===t.currentClue?i.downClue:i.acrossClue,t._updateDOM())}})),r.addEventListener("keypress",(function(e){32===e.keyCode&&e.preventDefault(),e.target.value="";var r=e.target.parentNode,l=s.getCell(r),n=(l.crossword,t.currentClue);function o(e,t,r){for(var l=null==e?"":e,n="";l.length<=t;)l+=" ";for(var s=Math.max(t,l.length),o=0;o<s;o++)n+=o==t?r:l[o];return n}var a=String.fromCharCode(e.keyCode);l.acrossClue&&(l.acrossClue.answer=o(l.acrossClue.answer,l.acrossClueLetterIndex,a)),l.downClue&&(l.downClue.answer=o(l.downClue.answer,l.downClueLetterIndex,a));var c=(l.acrossClue===n?l.acrossClueLetterIndex:l.downClueLetterIndex)+1;c<n.cells.length&&n.cells[c].cellElement.querySelector("input").focus()})),r.addEventListener("keyup",(function(e){switch(e.keyCode){case 37:var t=e.target.parentNode,r=(o=s.getCell(t)).x,l=o.y;o.x>0&&!0===o.crossword.cells[r-1][l].light&&s.getCellElement(o.crossword.cells[r-1][l]).querySelector("input").focus();break;case 38:t=e.target.parentNode,r=(o=s.getCell(t)).x,l=o.y;o.y>0&&!0===o.crossword.cells[r][l-1].light&&s.getCellElement(o.crossword.cells[r][l-1]).querySelector("input").focus();break;case 39:t=e.target.parentNode;var n=(o=s.getCell(t)).crossword.width;r=o.x,l=o.y;o.x+1<n&&!0===o.crossword.cells[r+1][l].light&&s.getCellElement(o.crossword.cells[r+1][l]).querySelector("input").focus();break;case 40:t=e.target.parentNode;var o,a=(o=s.getCell(t)).crossword.height;r=o.x,l=o.y;o.y+1<a&&!0===o.crossword.cells[r][l+1].light&&s.getCellElement(o.crossword.cells[r][l+1]).querySelector("input").focus()}})),r},n.prototype._updateDOM=function(){for(var e,t,l=this.currentClue,n=this.crossword,o=0;o<n.cells.length;o++)for(var a=0;a<n.cells[o].length;a++){var c=n.cells[o][a];!0===c.light&&(c.acrossClue===l||c.downClue===l?(e=s.getCellElement(c).querySelector("input"),t="active",e.className+=" "+t):r(s.getCellElement(c).querySelector("input"),"active"))}};var s=new l;e.exports=n},function(e,t,r){}]);